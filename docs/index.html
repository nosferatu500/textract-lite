<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@nosferatu500/textract-lite</title><meta name="description" content="Documentation for @nosferatu500/textract-lite"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@nosferatu500/textract-lite</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>@nosferatu500/textract-lite</h2></div><div class="tsd-panel tsd-typography"><a id="md:textract-lite" class="tsd-anchor"></a><h1 class="tsd-anchor-link">textract-lite<a href="#md:textract-lite" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>A text extraction node module.</p>
<a id="md:currently-extracts" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Currently Extracts...<a href="#md:currently-extracts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>DOCX</li>
<li>TXT.</li>
</ul>
<p>In almost all cases above, what textract cares about is the mime type.  So <code>.html</code> and <code>.htm</code>, both possessing the same mime type, will be extracted.  Other extensions that share mime types with those above should also extract successfully. For example, <code>application/vnd.ms-excel</code> is the mime type for <code>.xls</code>, but also for 5 other file types.</p>
<p><em>Does textract not extract from files of the type you need?</em>  Add an issue or submit a pull request. It many cases textract is already capable, it is just not paying attention to the mime type you may be interested in.</p>
<a id="md:install" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Install<a href="#md:install" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">i</span><span class="hl-1"> @</span><span class="hl-0">nosferatu500</span><span class="hl-1">/</span><span class="hl-0">textract</span><span class="hl-1">-</span><span class="hl-0">lite</span>
</code><button>Copy</button></pre>

<a id="md:extraction-requirements" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Extraction Requirements<a href="#md:extraction-requirements" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Note, if any of the requirements below are missing, textract will run and extract all files for types it is capable.  Not having these items installed does not prevent you from using textract, it just prevents you from extracting those specific files.</p>
<a id="md:configuration" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Configuration<a href="#md:configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Configuration can be passed into textract.  The following configuration options are available</p>
<ul>
<li><code>preserveLineBreaks</code>: When using the command line this is set to <code>true</code> to preserve stdout readability. When using the library via node this is set to <code>false</code>. Pass this in as <code>true</code> and textract will not strip any line breaks.</li>
<li><code>preserveOnlyMultipleLineBreaks</code>: Some extractors, like PDF, insert line breaks at the end of every line, even if the middle of a sentence. If this option (default <code>false</code>) is set to <code>true</code>, then any instances of a single line break are removed but multiple line breaks are preserved. Check your output with this option, though, this doesn't preserve paragraphs unless there are multiple breaks.</li>
<li><code>exec</code>: Some extractors (dxf) use node's <code>exec</code> functionality. This setting allows for providing <a href="http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback">config to <code>exec</code> execution</a>. One reason you might want to provide this config is if you are dealing with very large files. You might want to increase the <code>exec</code> <code>maxBuffer</code> setting.</li>
<li><code>[ext].exec</code>: Each extractor can take specific exec config. Keep in mind many extractors are responsible for extracting multiple types, so, for instance, the <code>odt</code> extractor is what you would configure for <code>odt</code> and <code>odg</code>/<code>odt</code> etc.  Check <a href="https://github.com/dbashford/textract/tree/master/lib/extractors">the extractors</a> to see which you want to specifically configure. At the bottom of each is a list of <code>types</code> for which the extractor is responsible.</li>
<li><code>tesseract.lang</code>: A pass-through to tesseract allowing for setting of language for extraction. ex: <code>{ tesseract: { lang:&quot;chi_sim&quot; } }</code></li>
<li><code>tesseract.cmd</code>: <code>tesseract.lang</code> allows a quick means to provide the most popular tesseract option, but if you need to configure more options, you can simply pass <code>cmd</code>. <code>cmd</code> is the string that matches the command-line options you want to pass to tesseract. For instance, to provide language and <code>psm</code>, you would pass <code>{ tesseract: { cmd:&quot;-l chi_sim -psm 10&quot; } }</code></li>
<li><code>pdftotextOptions</code>: This is a proxy options object to the library textract uses for pdf extraction: <a href="https://github.com/nisaacson/pdf-text-extract">pdf-text-extract</a>. Options include <code>ownerPassword</code>, <code>userPassword</code> if you are extracting text from password protected PDFs. IMPORTANT: textract modifies the pdf-text-extract <code>layout</code> default so that, instead of <code>layout: layout</code>, it uses <code>layout:raw</code>. It is not suggested you modify this without understanding what trouble that might get you in. See <a href="https://github.com/dbashford/textract/issues/75">this GH issue</a> for why textract overrides that library's default.</li>
<li><code>typeOverride</code>: Used with <code>fromUrl</code>, if set, rather than using the <code>content-type</code> from the URL request, will use the provided <code>typeOverride</code>.</li>
<li><code>includeAltText</code>: When extracting HTML, whether or not to include <code>alt</code> text with the extracted text. By default this is <code>false</code>.</li>
<li><code>allowHeaderAndFooter</code>: This option includes the extraction of content from header and footer in .odt files. By default this is <code>false</code>.</li>
</ul>
<p>To use this configuration at the command line, prefix each open with a <code>--</code>.</p>
<p>Ex: <code>textract image.png --tesseract.lang=deu</code></p>
<a id="md:usage" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Usage<a href="#md:usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:commmand-line" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Commmand Line<a href="#md:commmand-line" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>If textract is installed gloablly, via <code>npm install -g textract</code>, then the following command will write the extracted text to the console for a file on the file system.</p>
<pre><code><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-0">textract</span><span class="hl-1"> </span><span class="hl-0">pathToFile</span>
</code><button>Copy</button></pre>

<a id="md:flags" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Flags<a href="#md:flags" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Configuration flags can be passed into textract via the command line.</p>
<pre><code><span class="hl-0">textract</span><span class="hl-1"> </span><span class="hl-0">pathToFile</span><span class="hl-1"> --</span><span class="hl-0">preserveLineBreaks</span><span class="hl-1"> </span><span class="hl-2">false</span>
</code><button>Copy</button></pre>

<p>Parameters like <code>exec.maxBuffer</code> can be passed as you'd expect.</p>
<pre><code><span class="hl-0">textract</span><span class="hl-1"> </span><span class="hl-0">pathToFile</span><span class="hl-1"> --</span><span class="hl-0">exec</span><span class="hl-1">.</span><span class="hl-0">maxBuffer</span><span class="hl-1"> </span><span class="hl-3">500000</span>
</code><button>Copy</button></pre>

<p>And multiple flags can be used together.</p>
<pre><code><span class="hl-0">textract</span><span class="hl-1"> </span><span class="hl-0">pathToFile</span><span class="hl-1"> --</span><span class="hl-0">preserveLineBreaks</span><span class="hl-1"> </span><span class="hl-2">false</span><span class="hl-1"> --</span><span class="hl-0">exec</span><span class="hl-1">.</span><span class="hl-0">maxBuffer</span><span class="hl-1"> </span><span class="hl-3">500000</span>
</code><button>Copy</button></pre>

<a id="md:node" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Node<a href="#md:node" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><a id="md:import" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Import<a href="#md:import" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="javascript"><span class="hl-2">var</span><span class="hl-1"> </span><span class="hl-0">textract</span><span class="hl-1"> = </span><span class="hl-4">require</span><span class="hl-1">(</span><span class="hl-5">&#39;textract&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<a id="md:apis" class="tsd-anchor"></a><h4 class="tsd-anchor-link">APIs<a href="#md:apis" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>There are several ways to extract text.  For all methods, the extracted text and an error object are passed to a callback.</p>
<p><code>error</code> will contain informative text about why the extraction failed. If textract does not currently extract files of the type provided, a <code>typeNotFound</code> flag will be tossed on the error object.</p>
<a id="md:file" class="tsd-anchor"></a><h5 class="tsd-anchor-link">File<a href="#md:file" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><pre><code class="javascript"><span class="hl-0">textract</span><span class="hl-1">.</span><span class="hl-4">fromFileWithPath</span><span class="hl-1">(</span><span class="hl-0">filePath</span><span class="hl-1">, </span><span class="hl-2">function</span><span class="hl-1">( </span><span class="hl-0">error</span><span class="hl-1">, </span><span class="hl-0">text</span><span class="hl-1"> ) {})</span>
</code><button type="button">Copy</button></pre>

<pre><code class="javascript"><span class="hl-0">textract</span><span class="hl-1">.</span><span class="hl-4">fromFileWithPath</span><span class="hl-1">(</span><span class="hl-0">filePath</span><span class="hl-1">, </span><span class="hl-0">config</span><span class="hl-1">, </span><span class="hl-2">function</span><span class="hl-1">( </span><span class="hl-0">error</span><span class="hl-1">, </span><span class="hl-0">text</span><span class="hl-1"> ) {})</span>
</code><button type="button">Copy</button></pre>

<a id="md:file--mime-type" class="tsd-anchor"></a><h5 class="tsd-anchor-link">File + mime type<a href="#md:file--mime-type" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><pre><code class="javascript"><span class="hl-0">textract</span><span class="hl-1">.</span><span class="hl-4">fromFileWithMimeAndPath</span><span class="hl-1">(</span><span class="hl-0">type</span><span class="hl-1">, </span><span class="hl-0">filePath</span><span class="hl-1">, </span><span class="hl-2">function</span><span class="hl-1">( </span><span class="hl-0">error</span><span class="hl-1">, </span><span class="hl-0">text</span><span class="hl-1"> ) {})</span>
</code><button type="button">Copy</button></pre>

<pre><code class="javascript"><span class="hl-0">textract</span><span class="hl-1">.</span><span class="hl-4">fromFileWithMimeAndPath</span><span class="hl-1">(</span><span class="hl-0">type</span><span class="hl-1">, </span><span class="hl-0">filePath</span><span class="hl-1">, </span><span class="hl-0">config</span><span class="hl-1">, </span><span class="hl-2">function</span><span class="hl-1">( </span><span class="hl-0">error</span><span class="hl-1">, </span><span class="hl-0">text</span><span class="hl-1"> ) {})</span>
</code><button type="button">Copy</button></pre>

<a id="md:buffer--mime-type" class="tsd-anchor"></a><h5 class="tsd-anchor-link">Buffer + mime type<a href="#md:buffer--mime-type" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><pre><code class="javascript"><span class="hl-0">textract</span><span class="hl-1">.</span><span class="hl-4">fromBufferWithMime</span><span class="hl-1">(</span><span class="hl-0">type</span><span class="hl-1">, </span><span class="hl-0">buffer</span><span class="hl-1">, </span><span class="hl-2">function</span><span class="hl-1">( </span><span class="hl-0">error</span><span class="hl-1">, </span><span class="hl-0">text</span><span class="hl-1"> ) {})</span>
</code><button type="button">Copy</button></pre>

<pre><code class="javascript"><span class="hl-0">textract</span><span class="hl-1">.</span><span class="hl-4">fromBufferWithMime</span><span class="hl-1">(</span><span class="hl-0">type</span><span class="hl-1">, </span><span class="hl-0">buffer</span><span class="hl-1">, </span><span class="hl-0">config</span><span class="hl-1">, </span><span class="hl-2">function</span><span class="hl-1">( </span><span class="hl-0">error</span><span class="hl-1">, </span><span class="hl-0">text</span><span class="hl-1"> ) {})</span>
</code><button type="button">Copy</button></pre>

<a id="md:buffer--file-namepath" class="tsd-anchor"></a><h5 class="tsd-anchor-link">Buffer + file name/path<a href="#md:buffer--file-namepath" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><pre><code class="javascript"><span class="hl-0">textract</span><span class="hl-1">.</span><span class="hl-4">fromBufferWithName</span><span class="hl-1">(</span><span class="hl-0">name</span><span class="hl-1">, </span><span class="hl-0">buffer</span><span class="hl-1">, </span><span class="hl-2">function</span><span class="hl-1">( </span><span class="hl-0">error</span><span class="hl-1">, </span><span class="hl-0">text</span><span class="hl-1"> ) {})</span>
</code><button type="button">Copy</button></pre>

<pre><code class="javascript"><span class="hl-0">textract</span><span class="hl-1">.</span><span class="hl-4">fromBufferWithName</span><span class="hl-1">(</span><span class="hl-0">name</span><span class="hl-1">, </span><span class="hl-0">buffer</span><span class="hl-1">, </span><span class="hl-0">config</span><span class="hl-1">, </span><span class="hl-2">function</span><span class="hl-1">( </span><span class="hl-0">error</span><span class="hl-1">, </span><span class="hl-0">text</span><span class="hl-1"> ) {})</span>
</code><button type="button">Copy</button></pre>

<a id="md:url" class="tsd-anchor"></a><h5 class="tsd-anchor-link">URL<a href="#md:url" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h5><p>When passing a URL, the URL can either be a string, or a <a href="https://nodejs.org/api/url.html">node.js URL object</a>. Using the URL object allows fine grained control over the URL being used.</p>
<pre><code class="javascript"><span class="hl-0">textract</span><span class="hl-1">.</span><span class="hl-4">fromUrl</span><span class="hl-1">(</span><span class="hl-0">url</span><span class="hl-1">, </span><span class="hl-2">function</span><span class="hl-1">( </span><span class="hl-0">error</span><span class="hl-1">, </span><span class="hl-0">text</span><span class="hl-1"> ) {})</span>
</code><button type="button">Copy</button></pre>

<pre><code class="javascript"><span class="hl-0">textract</span><span class="hl-1">.</span><span class="hl-4">fromUrl</span><span class="hl-1">(</span><span class="hl-0">url</span><span class="hl-1">, </span><span class="hl-0">config</span><span class="hl-1">, </span><span class="hl-2">function</span><span class="hl-1">( </span><span class="hl-0">error</span><span class="hl-1">, </span><span class="hl-0">text</span><span class="hl-1"> ) {})</span>
</code><button type="button">Copy</button></pre>

<a id="md:testing-notes" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Testing Notes<a href="#md:testing-notes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:running-tests-on-a-mac" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Running Tests on a Mac?<a href="#md:running-tests-on-a-mac" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><code>sudo port install tesseract-chi-sim</code></li>
<li><code>sudo port install tesseract-eng</code></li>
<li>You will also want to disable textract's usage of textutil as the tests are based on output from antiword.
<ul>
<li>Go into <code>/lib/extractors/{doc|doc-osx|rtf}</code> and modify the code under <code>if ( os.platform() === 'darwin' ) {</code>. Uncommented the commented lines in these sections.</li>
</ul>
</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:textract-lite"><span>textract-<wbr/>lite</span></a><ul><li><a href="#md:currently-extracts"><span>Currently <wbr/>Extracts...</span></a></li><li><a href="#md:install"><span>Install</span></a></li><li><a href="#md:extraction-requirements"><span>Extraction <wbr/>Requirements</span></a></li><li><a href="#md:configuration"><span>Configuration</span></a></li><li><a href="#md:usage"><span>Usage</span></a></li><li><ul><li><a href="#md:commmand-line"><span>Commmand <wbr/>Line</span></a></li><li><ul><li><a href="#md:flags"><span>Flags</span></a></li></ul></li><li><a href="#md:node"><span>Node</span></a></li><li><ul><li><a href="#md:import"><span>Import</span></a></li><li><a href="#md:apis"><span>APIs</span></a></li><li><ul><li><a href="#md:file"><span>File</span></a></li><li><a href="#md:file--mime-type"><span>File + mime type</span></a></li><li><a href="#md:buffer--mime-type"><span>Buffer + mime type</span></a></li><li><a href="#md:buffer--file-namepath"><span>Buffer + file name/path</span></a></li><li><a href="#md:url"><span>URL</span></a></li></ul></li></ul></li></ul></li><li><a href="#md:testing-notes"><span>Testing <wbr/>Notes</span></a></li><li><ul><li><a href="#md:running-tests-on-a-mac"><span>Running <wbr/>Tests on a <wbr/>Mac?</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>@nosferatu500/textract-lite</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
